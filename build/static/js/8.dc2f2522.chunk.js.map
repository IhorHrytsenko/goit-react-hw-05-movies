{"version":3,"sources":["style/Form.module.css","views/SearchView.js"],"names":["module","exports","firstQuery","HistorySearch","useState","result","setResult","location","useLocation","api","query","fetch","then","response","json","data","error","console","log","useEffect","search","className","s","form","onSubmit","event","preventDefault","target","value","search__input","type","search__btn","results","map","r","key","id","to","pathname","state","from","title"],"mappings":"4HACAA,EAAOC,QAAU,CAAC,YAAc,0BAA0B,cAAgB,4BAA4B,KAAO,qB,kGCI9F,sBAAuC,IAA5BC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,cAGlC,EAA4BC,mBAAS,MAArC,mBAAOC,EAAP,KAAeC,EAAf,KACMC,EAAWC,cAajB,SAASC,EAAIC,GAET,GAAGA,EAAM,CAELP,EAAcO,GACd,IACQ,OAAOC,MAAM,qDAAD,OArBb,mCAqBa,kBAAsED,IACjFE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GAAI,OAAIT,EAAUS,MAGhC,MAAMC,GACE,OAAOC,QAAQC,IAAIF,KAanC,OApCAG,qBAAU,WAEiB,KAApBZ,EAASa,SAIZjB,EAAcD,GACdO,EAAIP,MAEL,CAACK,EAASa,SA4BT,oCACA,0BAAMC,UAAWC,IAAEC,KAAMC,SAV7B,SAAiBC,GAEbA,EAAMC,iBAENjB,EADcgB,EAAME,OAAO,GAAGC,SAQ7B,2BAAOP,UAAWC,IAAEO,gBACjB,4BAAQC,KAAK,SAAST,UAAWC,IAAES,aAAnC,mCAEHxB,EAASa,OACN,4BACKf,GAAUA,EAAO2B,QAAQC,KAAI,SAAAC,GAAC,OAEvB,wBAAIC,IAAKD,EAAEE,IAAX,IAAgB,kBAAC,IAAD,CAASC,GAAI,CAACC,SAAS,GAAD,OAAKJ,EAAEE,IAAMG,MAAM,CAACC,KAAMjC,KAAhD,IAA+D2B,EAAEO,OAAjF","file":"static/js/8.dc2f2522.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"search__btn\":\"Form_search__btn__3sNsV\",\"search__input\":\"Form_search__input__2WZ8w\",\"form\":\"Form_form__1dzem\"};","import React, {useState, useEffect} from 'react';\r\nimport {NavLink, useLocation } from 'react-router-dom';\r\nimport s from '../style/Form.module.css';\r\n\r\n\r\nexport default function ({firstQuery, HistorySearch}){\r\n\r\n    const APIKEY = '6456edf8e78b4973f18f7c8d63cd4cb6';\r\n    const [result, setResult] = useState(null);\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n\r\n        if(location.search === ''){\r\n            return;\r\n        }\r\n\r\n        HistorySearch(firstQuery);\r\n        api(firstQuery);\r\n\r\n    }, [location.search])\r\n\r\n    function api(query){\r\n\r\n        if(query){\r\n\r\n            HistorySearch(query);\r\n            try{    \r\n                    return fetch(`https://api.themoviedb.org/3/search/movie?api_key=${APIKEY}&query=${query}`)\r\n                    .then(response => response.json())\r\n                    .then(data => setResult(data))\r\n                    \r\n            }\r\n            catch(error){\r\n                    return console.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    function apiForm(event) {\r\n        \r\n        event.preventDefault();\r\n        const query = event.target[0].value;        \r\n        api(query);\r\n       \r\n    }\r\n \r\n    return (\r\n        <>\r\n        <form className={s.form} onSubmit={apiForm}>\r\n         <input className={s.search__input} /> \r\n            <button type=\"submit\" className={s.search__btn}>Найти</button>\r\n\r\n        {location.search === '' ?\r\n            <ul>\r\n                {result && result.results.map(r => \r\n                        \r\n                        <li key={r.id}> <NavLink to={{pathname: `${r.id}`, state:{from: location},}}> {r.title}</NavLink> </li> \r\n                    )\r\n                }\r\n            </ul>\r\n        \r\n          :  <ul>\r\n                {result && result.results.map(r => \r\n                        \r\n                        <li key={r.id}> <NavLink to={{pathname: `${r.id}`, state:{from: location},}}> {r.title}</NavLink> </li> \r\n                    )\r\n                }\r\n            </ul>\r\n        \r\n        }\r\n\r\n\r\n        </form>\r\n        </>\r\n    )\r\n}"],"sourceRoot":""}